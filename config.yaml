# ============================================================
# Project Configuration File (config.yaml)
# Relative to ./Inputs
# ============================================================

# -------------------- A1) AOI & OSM Parameters --------------------
MODE: "place"            # "place" | "coords" | "shapefile" – how to select AOI
PLACE_NAME: "Kahramanmaras, Turkey"        # used if MODE == "place", data downloaded from OSM Network.
target_dt: "2023-02-05T23:59:59Z"          # OSM historical snapshot datetime (UTC)

WFS_URL: "https://tubvsig-so2sat-vm1.srv.mwn.de/geoserver/ows?"  # WFS endpoint
WFS_LAYER: "global3D:lod1_global"          # WFS layer name for 3D buildings
GRID_PARTS: 16                              # how many tiles to split AOI for WFS (NxN)
BBOX_PAD_DEG: 0.0                           # optional padding in degrees for AOI bbox

# AOI polygon (used if MODE == "coords")
AOI_COORDS:
  - [36.881823560, 37.603478376]
  - [36.879570189, 37.563657201]
  - [36.884479335, 37.562039793]
  - [36.905631195, 37.560362934]
  - [36.926226169, 37.554022403]
  - [36.881823560, 37.603478376]

# Shapefile name (used if MODE == "shapefile"); joined with ./Inputs in code
SHP_NAME: "Kahramanmaras_City.shp"

# -------------------- B1) DPM Damage Threshold & Input --------------------
# DPM raster filename (relative to ./Inputs in code)
DPM_FILE: "EOS_DPM2_rawValues_Turkiye2023earthquakes_tracksMergedByMean.geo.crop.tif"

DPM_THRESHOLD: 0.84      # Damage Proxy Map (DPM) threshold for "damaged" buildings

# -------------------- B5) Tiling for Damage Vectorization --------------------
TILE_M: 2000             # tile size in meters
OVERLAP_M: 50            # tile overlap in meters to avoid edge artifacts
DISSOLVE_IN_TILE: true   # dissolve damaged polygons within each tile

# -------------------- C1) Population Data --------------------
# Population raster filename (relative to ./Inputs in code)
POP_FILE: "kahramanmaras_population.tif"

DEFAULT_HEIGHT: null     # e.g., 3.0 to force a default height (meters); null to skip

# -------------------- D1) Humanitarian Planning Constants --------------------
GUIDELINES:
  water_l_per_person_per_day: 20.0    # liters/person/day
  food_kcal_per_person_per_day: 2100  # kcal/person/day
  shelter_m2_per_person: 4.0          # m²/person
  iehk_pop_served: 10000              # one IEHK serves this many people
  iehk_duration_days: 90              # IEHK duration in days
  buffer_factor: 1.10                 # +10% contingency buffer

DUR_AFFECTED: 90       # duration (days) for affected population planning
DUR_UNAFFECTED: 14     # duration (days) for unaffected/host population

# -------------------- E1) Building Buffer Settings --------------------
HEIGHT_COL: "height"          # building height column
BUFFER_FALLBACK_M: 5.0        # fallback buffer radius (m) if height missing
SIMPLIFY_TOL_M: 1.0           # simplification tolerance (m) for buffers
TILE_M_E: 2000                # tile size (m) for E-section tiling
OVERLAP_M_E: 50               # tile overlap (m) for E-section

# -------------------- H1) Route Analysis Parameters --------------------
orig_node: null               # OSM node ID for origin (null → use coords)
dest_node: null               # OSM node ID for destination (null → use coords)
orig_lonlat: [36.9000, 37.5859]  # fallback origin coordinates (lon, lat)
dest_lonlat: [36.9202, 37.5809]  # fallback destination coordinates (lon, lat)
ROUTE_TARGET: 10              # number of distinct shortest routes to compute (1–10)

# -------------------- I1) Betweenness Centrality Options --------------------
USE_BBOX: true                # whether to use bounding box subset
lon_min: 36.650
lon_max: 37.150
lat_min: 37.450
lat_max: 37.750

USE_APPROX_BC: true           # True → approximate BC (faster), False → exact
K_SAMPLES: 2000               # number of random samples for approximate BC
BC_WEIGHT: "length"           # edge weight to use for BC
BC_NORMALIZED: true           # normalize BC values to [0,1]

